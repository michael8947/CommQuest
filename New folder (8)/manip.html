<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MindTrap: ××™ ×©×•×œ×˜ ×‘××™?</title>
  <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    /* ×¢×™×¦×•×‘ ×‘×¡×’× ×•×Ÿ CommQuest */
    body {
      font-family: 'Rubik', sans-serif;
      background-color: #f0f2f5;
      margin: 0;
      padding: 20px;
      direction: rtl;
      text-align: right;
      color: #333;
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
      background-color: white;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.15);
      padding: 20px;
      position: relative;
      overflow: hidden;
    }
    .stage-header {
      text-align: center;
      background: linear-gradient(135deg, #8e44ad 0%, #673ab7 100%);
      color: white;
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 20px;
      font-weight: bold;
      font-size: 22px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    .progress-bar {
      width: 100%;
      height: 20px;
      background-color: #e0e0e0;
      border-radius: 10px;
      margin-bottom: 20px;
      overflow: hidden;
      box-shadow: inset 0 1px 3px rgba(0,0,0,0.2);
    }
    .progress {
      height: 100%;
      background: linear-gradient(90deg, #8e44ad 0%, #9b59b6 100%);
      border-radius: 10px;
      width: 0%;
      transition: width 0.5s;
    }
    .xp-counter {
      position: absolute;
      top: 10px;
      right: 10px;
      background: linear-gradient(135deg, #FFC107 0%, #FF9800 100%);
      padding: 5px 10px;
      border-radius: 20px;
      color: white;
      font-weight: bold;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }
    .stats-bar {
      display: flex;
      justify-content: space-between;
      background-color: #fafafa;
      padding: 10px 15px;
      border-radius: 10px;
      margin-bottom: 20px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.05);
    }
    .stat {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .stat-label {
      font-size: 0.9rem;
      opacity: 0.7;
    }
    .stat-value {
      font-size: 1.2rem;
      font-weight: bold;
    }
    .xp-value {
      color: #8e44ad;
    }
    .suspicion-value {
      color: #ff4444;
    }
    .scenario-card {
      background-color: #f8faff;
      border-radius: 15px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 6px 12px rgba(0,0,0,0.1);
      position: relative;
      overflow: hidden;
      border-left: 5px solid #8e44ad;
    }
    .scenario-title {
      font-size: 1.5rem;
      margin-bottom: 15px;
      color: #8e44ad;
    }
    .chat-container {
      margin-bottom: 20px;
      background-color: #f1f1f1;
      border-radius: 10px;
      padding: 15px;
      max-height: 250px;
      overflow-y: auto;
    }
    .chat-message {
      display: flex;
      margin-bottom: 15px;
    }
    .avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      margin-left: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 1.2rem;
      flex-shrink: 0;
      color: white;
    }
    .avatar-yael { background-color: #3f51b5; }
    .avatar-noam { background-color: #e91e63; }
    .avatar-amit { background-color: #ff9800; }
    .message-content {
      background-color: rgba(0,0,0,0.05);
      padding: 10px 15px;
      border-radius: 15px;
      flex-grow: 1;
    }
    .character-name {
      font-weight: bold;
      margin-bottom: 5px;
    }
    .options-container {
      display: grid;
      grid-template-columns: 1fr;
      gap: 15px;
      margin-top: 20px;
    }
    .option-btn {
      background-color: rgba(142, 68, 173, 0.2);
      border: 1px solid #8e44ad;
      border-radius: 10px;
      padding: 15px;
      color: #333;
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: right;
      position: relative;
      overflow: hidden;
    }
    .option-btn:hover {
      background-color: rgba(142, 68, 173, 0.4);
      transform: translateY(-2px);
    }
    .option-btn.selected {
      background-color: #673ab7;
      color: white;
    }
    .option-btn .technique {
      position: absolute;
      bottom: 5px;
      left: 10px;
      font-size: 0.8rem;
      color: #8e44ad;
      opacity: 0.7;
    }
    .feedback-container {
      margin-top: 20px;
      padding: 15px;
      background-color: #e1f5fe;
      border-radius: 10px;
      border-right: 3px solid #03a9f4;
      display: none;
    }
    .feedback-title {
      font-weight: bold;
      color: #8e44ad;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
    }
    .analysis-container {
      background-color: #fafafa;
      border-radius: 10px;
      padding: 15px;
      margin-top: 20px;
      border-left: 3px solid #ffbb33;
      display: none;
    }
    .analysis-title {
      color: #ffbb33;
      margin-bottom: 10px;
      font-weight: bold;
      font-size: 1.1rem;
    }
    .next-btn {
      background-color: #03dac6;
      color: #121212;
      border: none;
      padding: 12px 25px;
      border-radius: 8px;
      font-weight: bold;
      cursor: pointer;
      margin-top: 20px;
      transition: all 0.3s ease;
      display: none;
    }
    .next-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(3, 218, 198, 0.5);
    }
    .suspicion-warning {
      display: none;
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background-color: rgba(255, 68, 68, 0.9);
      color: white;
      padding: 15px 25px;
      border-radius: 10px;
      box-shadow: 0 4px 15px rgba(255, 68, 68, 0.5);
      z-index: 100;
      animation: pulse 2s infinite;
    }
    @keyframes pulse {
      0% { box-shadow: 0 0 0 0 rgba(255, 68, 68, 0.7); }
      70% { box-shadow: 0 0 0 15px rgba(255, 68, 68, 0); }
      100% { box-shadow: 0 0 0 0 rgba(255, 68, 68, 0); }
    }
    .buttons {
      display: flex;
      justify-content: space-between;
      margin-top: 20px;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .scene {
      display: none;
      animation: fadeIn 0.5s;
    }
    .scene.active {
      display: block;
    }
    /* ×›×¤×ª×•×¨ PANIC */
    .panic-btn {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: red;
      color: white;
      padding: 10px 15px;
      border-radius: 30px;
      font-weight: bold;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3);
      animation: pulse 2s infinite;
      z-index: 100;
      cursor: pointer;
    }
    /* ×¢×™×¦×•×‘ ×œ×”×¨×¡ ×”×¢×•×œ× ×¢× ×¨×¢×™×“×•×ª ×•××¤×§×˜×™× */
    #destroyOverlay {
      animation: shake 0.5s infinite;
      text-shadow: 0 0 10px red;
    }
    @keyframes shake {
      0% { transform: translate(0px, 0px) rotate(0deg); }
      20% { transform: translate(-5px, 5px) rotate(-1deg); }
      40% { transform: translate(5px, -5px) rotate(1deg); }
      60% { transform: translate(-5px, 5px) rotate(-1deg); }
      80% { transform: translate(5px, -5px) rotate(1deg); }
      100% { transform: translate(0px, 0px) rotate(0deg); }
    }
    .destroy-btn {
  position: fixed;
  bottom: 80px;
  right: 20px;
  background: darkred;
  color: white;
  padding: 10px 15px;
  border-radius: 30px;
  font-weight: bold;
  cursor: pointer;
  box-shadow: 0 4px 10px rgba(0,0,0,0.3);
  transition: all 0.3s ease;
  z-index: 100;
}

.destroy-btn:hover {
  background: crimson;
  transform: scale(1.05);
}

  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>ğŸ’€ MindTrap: ××™ ×©×•×œ×˜ ×‘××™?</h1>
      <div class="subtitle">×”××œ×›×•×“×ª ×”×¤×¡×™×›×•×œ×•×’×™×ª â€“ ×©×œ×‘ ×”×× ×™×¤×•×œ×¦×™×” ×”×—×‘×¨×ª×™×ª</div>
    </header>
    
    <div class="stats-bar">
      <div class="stat">
        <div class="stat-label">× ×§×•×“×•×ª ×”×©×¤×¢×”</div>
        <div class="stat-value xp-value" id="xp-display">100</div>
      </div>
      <div class="stat">
        <div class="stat-label">×¨××ª ×—×©×“</div>
        <div class="stat-value suspicion-value" id="suspicion-display">0%</div>
      </div>
      <div class="stat">
        <div class="stat-label">×©×œ×‘</div>
        <div class="stat-value" id="level-display">1/3</div>
      </div>
    </div>
    
    <div class="scenario-card" id="scenario-card">
      <h2 class="scenario-title" id="scenario-title"></h2>
      
      <div class="chat-container" id="chat-container">
        <!-- ×”×•×“×¢×•×ª ×”×ª×—×œ×ª×™×•×ª ×™×™×˜×¢× ×• ×›××Ÿ -->
      </div>
      
      <div class="options-container" id="options-container">
        <!-- 4 ××¤×©×¨×•×™×•×ª ×ª×’×•×‘×” -->
      </div>
      
      <div class="feedback-container" id="feedback-container">
        <div class="feedback-title">ğŸ“ ×ª×’×•×‘×•×ª ×”×§×‘×•×¦×”:</div>
        <div id="feedback-content"></div>
        <div class="analysis-container" id="analysis-container">
          <div class="analysis-title">ğŸ§  × ×™×ª×•×— ×¤×¡×™×›×•×œ×•×’×™ ×¡×•×“×™:</div>
          <div id="analysis-content"></div>
        </div>
        <button class="next-btn" id="next-btn" onclick="nextScenario()">×”××©×š</button>
      </div>
    </div>
    
    <div class="suspicion-warning" id="suspicion-warning">
      âš ï¸ ×©×™× ×œ×‘! ×”×§×‘×•×¦×” ××ª×—×™×œ×” ×œ×—×©×•×“ ×‘×× ×™×¤×•×œ×¦×™×” ×©×œ×š
    </div>
  </div>
  
  <!-- ×›×¤×ª×•×¨×™ PANIC ×•×”×¨×¡ ×”××©×—×§ -->
  <div class="panic-btn" onclick="panicMode()">PANIC!</div>
  
  <!-- Audio Elements: ××•×–×™×§×ª ×¨×§×¢ ×•××¤×§×˜×™× -->
  <audio id="backgroundMusic" src="epic-background-music-313043.mp3" loop></audio>
  <audio id="explosionSound" src="my-first-recorded-explosion-103816.mp3"></audio>
  <audio id="panicSound" src="man-screaming-259682.mp3"></audio>
  <audio id="missionSuccessSound" src="mission-success-41211.mp3"></audio>
  <audio id="transitionSound" src="cartoon-fail-trumpet-278822.mp3"></audio>
  
  <script>
    // ×”×¤×¢×œ×ª ××•×–×™×§×ª ×¨×§×¢ (30% ×•×•×œ×™×•×)
    const bgMusic = document.getElementById('backgroundMusic');
    bgMusic.volume = 0.3;
    bgMusic.play().catch(err => console.error("×œ× ×”×¦×œ×™×— ×œ×”×¤×¢×™×œ ××•×–×™×§×ª ×¨×§×¢:", err));
    document.addEventListener('click', () => {
      if (bgMusic.paused) {
        bgMusic.play().catch(err => console.error("×œ× ×”×¦×œ×™×— ×œ×”×¤×¢×™×œ ××•×–×™×§×ª ×¨×§×¢:", err));
      }
    });
    
    // ×”×’×“×¨×•×ª ××©×—×§
    const gameState = {
      xp: 100,
      suspicion: 0,
      currentScenario: 0,
      scenarios: [
        {
          title: "×‘×™×˜×•×œ ×”×˜×™×•×œ ×”×©× ×ª×™",
          initialMessages: [
            { character: "×™×¢×œ", text: "×©××¢×ª× ×©×”××•×¨×” ×¨×•×¦×” ×œ×‘×˜×œ ××ª ×”×˜×™×•×œ ×”×©× ×ª×™? ×× ×™ ×œ× ××××™× ×”..." },
            { character: "× ×•×¢×", text: "×•×•××™, ×–×” ×™×”×™×” ×××© ×××›×–×‘. ×›×œ ×”×›×™×ª×” ××—×›×” ×œ×–×” ×›×œ ×”×©× ×”." },
            { character: "×¢××™×ª", text: "×˜×™×¤×•×¡×™. ×”××•×¨×™× ×ª××™×“ ×¨×•×¦×™× ×œ×§×—×ª ×œ× ×• ××ª ×”×“×‘×¨×™× ×”×›×™ ×›×™×¤×™×™×. ××™×–×” ×‘××¡×”." }
          ],
          options: [
            {
              text: "×—×‘×œ... ×–×” ×”×™×” ×”×¡×™×›×•×™ ×”××—×¨×•×Ÿ ×©×œ× ×• ×œ×”×¨×’×™×© ×—×•×¤×©. ×›×•×œ× ×• ×”×™×™× ×• ×¦×¨×™×›×™× ××ª ×–×” ××—×¨×™ ×”×ª×§×•×¤×” ×”×§×©×” ×©×¢×‘×¨× ×•.",
              technique: "×¨×’×©×™",
              xp: 15,
              suspicion: 5,
              responses: {
                yael: "× ×•, ×× ×›×‘×¨ × ×’××¨ ×”×—×•×¤×© â€“ ×œ×¤×—×•×ª × ×•×›×œ ×œ×”×ª×œ×•× ×Ÿ ×‘×¡×’× ×•×Ÿ ××œ×›×•×ª×™.",
                noam: "×”×™×™×ª×™ ××¦×¤×” ×××•×¨×” ×œ× ×¡×•×ª ××©×”×• ×—×“×©, ×œ× ×¨×§ ×œ×‘×˜×œ ××ª ×”×¡×‘×‘.",
                amit: "×—×•×¤×© ×–×” ××•×œ×™ × ×©××¢ ×˜×•×‘, ××‘×œ ×–×” ×™×•×ª×¨ ×›××• ×œ×’×œ×’×œ ××ª ×”×›××‘ ×œ×¡×˜× ×“-××¤."
              },
              analysis: "×˜×›× ×™×§×ª '×¨×’×©× ×•×ª ××›×•×•× ×ª' â€“ ××¦×™×’×™× ××ª ×”××›×–×‘×” ×›××©×”×• ×©× ×™×ª×Ÿ ×œ×”×¤×•×š ×œ×‘×“×™×—×”, ×’× ×›×©×–×” ×›×•××‘."
            },
            {
              text: "×¨×•×‘ ×”×›×™×ª×” × ×’×“ ×”×‘×™×˜×•×œ. ××•×œ×™ ×›×“××™ ×©× ××¨×’×Ÿ ×¢×¦×•××”? ××¤×™×œ×• ×”××•×¨×” ×™×¦×—×§ ×× × ×—×ª×•× ×¢×œ×™×” ×‘×§×¨×™×¦×•×ª.",
              technique: "×× ×™×¤×•×œ×¦×™×” ×—×‘×¨×ª×™×ª",
              xp: 25,
              suspicion: 15,
              responses: {
                yael: "×¢×¦×•××” ×¢× ×§×¦×ª ×”×•××•×¨ â€“ ××•×œ×™ × ×’×¨×•× ×œ×” ×œ×”×‘×™×Ÿ ×©×”×›×•×— ×”×•× ×©×œ× ×•.",
                noam: "×¢×‘×•×“×” ×§×‘×•×¦×ª×™×ª ×¢× ×¡×˜× ×“-××¤? ×–×” ×™×›×•×œ ×œ×©×‘×•×¨ ××ª ×”×©×’×¨×”.",
                amit: "×× ×›×œ ×”×›×™×ª×” ××ª××—×“×ª, ×’× ×”××•×¨×” ×™×¦×˜×¨×š ×œ×”×›×™×¨ ×‘×›×š ×©×”×›×•×— ×©×œ× ×• ×”×•× ×××™×ª×™."
              },
              analysis: "×˜×›× ×™×§×ª '×”×•×›×—×” ×—×‘×¨×ª×™×ª' â€“ ×›×©×”×§×‘×•×¦×” ××ª×œ×›×“×ª ×‘×¦×—×•×§, ××£ ×¡××›×•×ª ×œ× ×™×›×•×œ×” ×œ×¢××•×“ ××•×œ× ×•."
            },
            {
              text: "×× × ×•×•×ª×¨ ×¢×œ ×”×˜×™×•×œ, × ×•×•×ª×¨ ×¢×œ ×›×œ ×”×ª×§×•×•×ª ×•×”×—×œ×•××•×ª â€“ ×›××• ×œ×¡×’×•×¨ ××ª ×”×”×¦×’×•×ª ×•×œ×¦×¤×•×ª ×¨×§ ×‘×˜×¨×’×™×§ ×§×•××“×™×”.",
              technique: "×“×¨××˜×™×•×ª ××œ×•×“×¨××˜×™×ª",
              xp: 10,
              suspicion: 20,
              responses: {
                yael: "×–×” ×›×‘×¨ ×œ× ×˜×™×•×œ, ×–×” ××ª×—×™×œ ×¡×¨×˜ ×¢×¦×•×‘ ×¢× ×¤×¡×§×•×œ ×©×œ ×¦×—×•×§ ××¨×™×¨.",
                noam: "× ×©××¢ ×›××• ×ª×¡×¨×™×˜ × ×˜×¤×œ×™×§×¡ â€“ ×›×•××‘ ×•××¦×—×™×§ ×‘×• ×–×× ×™×ª.",
                amit: "×× ×–×” ×¡×•×£ ×›×œ, ×œ×¤×—×•×ª × ×¡×™×™× ×¢× ×—×™×•×š ×‘×–××Ÿ ×©×”×œ×‘ ××ª×§×¨×¢."
              },
              analysis: "×˜×›× ×™×§×ª '×§×˜×¡×˜×¨×•×¤×™×–×¦×™×”' â€“ ×œ×”×¤×•×š ××©×‘×¨ ×œ××•×¤×¢ ×§×•××™, ×’× ×›×©×”××¦×™××•×ª × ×¨××™×ª ×“×¨×××™×ª."
            },
            {
              text: "×”××•×¨×” ×”×–×”? ×”×•× ×¡×ª× ××—×¤×© ×œ×©×œ×•×˜. ×”×’×™×¢ ×”×–××Ÿ ×©× ×¨××” ×œ×• ×©×’× ×× ×—× ×• ×™×•×“×¢×™× ×œ×”×¤×™×œ ×‘×“×™×—×•×ª ×—×•×¦×•×ª ×’×‘×•×œ×•×ª!",
              technique: "×¤×¨×•×‘×•×§×¦×™×”",
              xp: 20,
              suspicion: 25,
              responses: {
                yael: "××•×œ×™ ×”×•× ×¦×¨×™×š ×œ×œ××•×“ ×©×”×›×•×— ×”×××™×ª×™ ×”×•× ×‘×§×¨×™×¦×•×ª, ×œ× ×‘×“×™×‘×•×¨×™× ×¡×ª×.",
                noam: "×× ×”×•× ×¨×•×¦×” ×œ×©×œ×•×˜, × ×‘×™× ×œ×• ×× ×”×™×’×•×ª ×¢× ×§×•×¨×˜×•×‘ ×¡×˜× ×“-××¤.",
                amit: "×”×’×™×¢ ×”×–××Ÿ ×œ×”×¤×•×š ××•×ª×• ×œ×§×•××™×§××™ â€“ ××• ×œ×¤×—×•×ª ×œ×ª×ª ×œ×• ×˜×¢×™××” ××”×›×•×— ×©×œ× ×•."
              },
              analysis: "×˜×›× ×™×§×ª '×“××•× ×™×–×¦×™×” ×©×œ ×¡××›×•×ª' â€“ ×”×¤×™×›×ª ×”×¡××›×•×ª ×œ×§×•××“×™×” ×©×—×•×¨×”, ×›×™ ×’× ×”×‘×•×¡×™× ×¦×¨×™×›×™× ×œ×‘×“×•×— ××“×™ ×¤×¢×."
            }
          ],
          nextScenario: 1
        },
        {
          title: "×‘×—×™×¨×ª × ×•×©× ×œ×¤×¨×•×™×§×˜ ×”×§×‘×•×¦×ª×™",
          initialMessages: [
            { character: "×™×¢×œ", text: "××– ×”××•×¨×” × ×ª×Ÿ ×œ× ×• ×œ×‘×—×•×¨ × ×•×©× ×œ×¤×¨×•×™×§×˜ ×”×§×‘×•×¦×ª×™. ×™×© ×œ×›× ×¨×¢×™×•× ×•×ª?" },
            { character: "× ×•×¢×", text: "××•×œ×™ ××©×”×• ×¢×œ ×©×™× ×•×™×™ ××§×œ×™×? ×–×” × ×•×©× ×—×©×•×‘ ×•××¢× ×™×™×Ÿ." },
            { character: "×¢××™×ª", text: "× ×“×•×©... ×‘× ×œ×™ ××©×”×• ×™×•×ª×¨ ××§×•×¨×™. ××•×œ×™ ×”×©×¤×¢×•×ª ×”×¨×©×ª×•×ª ×”×—×‘×¨×ª×™×•×ª?" }
          ],
          options: [
            {
              text: "×©××¢×ª×™ ×©×”××•×¨×” ×××© ××•×”×‘ ×¤×¨×•×™×§×˜×™× ×¢×œ ×˜×›× ×•×œ×•×’×™×” ×•×—×™× ×•×š. ×× × ×‘×—×¨ ×‘×–×”, ××•×œ×™ × ×–×›×” ×œ×¦×™×•×Ÿ ×©×™×¨×§×™×¢ ××ª ×”×©×’×¨×”.",
              technique: "×× ×™×¤×•×œ×¦×™×” ××¨×•××–×ª",
              xp: 20,
              suspicion: 10,
              responses: {
                yael: "×˜×›× ×•×œ×•×’×™×” ×•×—×™× ×•×š ×¢× ×§×¨×™×¦×” â€“ ××•×œ×™ ×’× ×”×¦×™×•×Ÿ ×™×”×™×” ××’× ×™×‘.",
                noam: "×¦×™×•×Ÿ ×’×‘×•×” ××• ×œ×¤×—×•×ª ×¡××˜×™×¨×” ××ª×•×§×” â€“ ×–×” ×™×›×•×œ ×œ×¢×‘×•×“.",
                amit: "××™×“×¢ ×¡×•×“×™ ×©××‘×™× ×—×™×•×š ×§×˜×Ÿ ×œ×¢×•×œ× ×”×›×‘×“ ×©×œ ×”×œ×™××•×“×™×."
              },
              analysis: "×˜×›× ×™×§×ª '××™×“×¢ ×¤×¨×™×‘×™×œ×’×™ ××¨×•××–' â€“ ×œ×”×•×¡×™×£ ×˜×•×•×™×¡×˜ ×©×œ ×¡×•×“×™×•×ª ×•×”×•××•×¨ ×©××©× ×” ××ª ×›×œ ×”×ª××•× ×”."
            },
            {
              text: "×× ×™ ×—×•×©×‘ ×©×¨×©×ª×•×ª ×—×‘×¨×ª×™×•×ª ×–×” ×¨×¢×™×•×Ÿ ××¢×•×œ×” â€“ × ×‘×—×¨ ×‘× ×•×©× ×•× ×¢×™×£ ×›××” ×××™× ×§×•×“×¨×™× ×‘×“×¨×š.",
              technique: "×—×™×–×•×§ ×¡×œ×§×˜×™×‘×™",
              xp: 15,
              suspicion: 5,
              responses: {
                yael: "×× × ×¦×œ× ××ª ×”×›×™×©×œ×•× ×•×ª ×¢× ×¤×™×œ×˜×¨ ××©×¢×©×¢, ×–×” ×™×”×™×” ×•×™×¨××œ×™.",
                noam: "×¡×˜×•×¨×™ ×¢× ×§×¨×™×¦×” ×™×›×•×œ ×œ×©× ×•×ª ××ª ×”××¦×‘.",
                amit: "×‘×•××• × ×¢×©×” ××ª ×–×” ×›×š ×©×›×œ ×›×™×ª×” ×ª×“×‘×™×§ ××•×ª× ×• â€“ ×’× ×× ×–×” ×¨×§ ×‘×©×‘×™×œ ×”×××™×."
              },
              analysis: "×˜×›× ×™×§×ª '×—×™×–×•×§ ×¡×œ×§×˜×™×‘×™' â€“ ×›×©×›×•×œ× ××¦×˜×¨×¤×™×, ××¤×™×œ×• ×”×¨×¢×™×•×Ÿ ×”×›×™ ×©×˜×—×™ ×”×•×¤×š ×œ×’××•× ×™."
            },
            {
              text: "×‘×•××• × ×‘×—×¨ ××©×”×• ×§×œ â€“ ×›×™ ×¢× ×›×œ ×”××‘×—× ×™×, ××¤×™×œ×• ×”×›×™×©×œ×•×Ÿ ×™×›×•×œ ×œ×”×™×•×ª ××¦×—×™×§.",
              technique: "×”×¡×˜×ª ××¡×’×•×¨",
              xp: 10,
              suspicion: 15,
              responses: {
                yael: "×§×œ ×–×” ×˜×•×‘, ××‘×œ ×× ×—× ×• ×¨×•×¦×™× ×’× ×§×¦×ª ××ª×’×¨ ×¢× ×—×™×•×š.",
                noam: "×”×¢×•××¡ ×’×“×•×œ, ××– ××•×œ×™ × ×‘×—×¨ ××ª ×”×“×¨×š ×”×§×œ×” ×¢× ×§×¨×™×¦×”.",
                amit: "×œ×¤×¢××™× ×”×“×¨×š ×”×§×œ×” ××•×‘×™×œ×” ×œ×˜×¢×•×™×•×ª ××¦×—×™×§×•×ª â€“ ××™ ×œ× ××•×”×‘ ×›×›×”?"
              },
              analysis: "×˜×›× ×™×§×ª '×©×™× ×•×™ ××¡×’×•×¨' â€“ ×œ×”×¤×•×š ××ª ×”×§×•×©×™ ×œ×‘×“×™×—×”, ×’× ×× ×–×” ××•××¨ ×©×”×“×¨×š ×œ× ×ª×”×™×” ××•×©×œ××ª."
            },
            {
              text: "×ª×¨××•, ×›×•×œ× ×¢×•×©×™× ×¤×¨×•×™×§×˜×™× ×¢×œ ×©×™× ×•×™ ××§×œ×™× ××• ×¨×©×ª×•×ª ×—×‘×¨×ª×™×•×ª. ×× ×× ×—× ×• ×¨×•×¦×™× ×œ×”×ª×‘×œ×˜ â€“ ×‘×•××• × ×‘×—×¨ ×‘×‘×™× ×” ××œ××›×•×ª×™×ª ×¢×œ ×”××•×¡×¨, ×¢× ×§×¦×ª ×¤×™×œ×•×¡×•×¤×™×” ×¦×™× ×™×ª.",
              technique: "×™×¦×™×¨×ª ×™×™×—×•×“×™×•×ª",
              xp: 25,
              suspicion: 10,
              responses: {
                yael: "×‘×™× ×” ××œ××›×•×ª×™×ª ×¢×œ ×”××•×¡×¨? ×–×” ×›××• ×œ×©×™× ××—×©×‘ ×œ×‘×©×œ ×¦'×™×œ×™ â€“ ×¤×¨×•×‘×•×§×¦×™×” ××ª×•×‘×œ×ª.",
                noam: "× ×©××¢ ××¡×•×‘×š, ××‘×œ ××•×œ×™ ×–×” ×™×’×¨×•× ×œ×›×•×œ× ×œ×”×¡×ª×›×œ ×¢×œ×™× ×• ×‘×ª×“×”××” ×•×‘×¦×—×•×§.",
                amit: "×™×•×¦× ×“×•×¤×Ÿ, ×›××• ×”×•××•×¨ ×©×—×•×¨ ×©××ª×¢×•×¤×£ ×‘×××¦×¢ ×”×™×•×."
              },
              analysis: "×˜×›× ×™×§×ª '××¤×§×˜ ×”×™×™×—×•×“×™×•×ª' â€“ ×œ×”×¨××•×ª ×©××ª×” ×©×•× ×”, ×’× ×× ×”×”×‘×“×œ ×”×•× ×¨×§ ×§×¨×™×¦×” ×œ×¢×•×œ× ×”××©×•×’×¢."
            }
          ],
          nextScenario: 2
        },
        {
          title: "×‘×—×™×¨×ª × ×¦×™×’ ×”×›×™×ª×” ×œ××•×¢×¦×ª ×”×ª×œ××™×“×™×",
          initialMessages: [
            { character: "×™×¢×œ", text: "×©××¢×ª× ×©×‘×©×‘×•×¢ ×”×‘× ×™×© ×‘×—×™×¨×•×ª ×œ××•×¢×¦×ª ×”×ª×œ××™×“×™×? ×¦×¨×™×š ×œ×‘×—×•×¨ × ×¦×™×’ ××”×›×™×ª×” ×©×œ× ×•." },
            { character: "× ×•×¢×", text: "×›×Ÿ, ×× ×™ ×—×•×©×‘ ×©×¨×•×Ÿ ×™×”×™×” ××¢×•×œ×”. ×”×•× ×ª××™×“ ××“×‘×¨ ×™×¤×” ×•××™×™×¦×’ ××ª ×›×•×œ×." },
            { character: "×¢××™×ª", text: "××‘×œ ×¨×•×Ÿ ×¤×—×•×ª × ×œ×—× ×›×©×¦×¨×™×š. ××•×œ×™ ×¢×“×™×£ ××™×©×”×• ×™×•×ª×¨ ××¡×¨×˜×™×‘×™ ×›××• ×“× ×”?" }
          ],
          options: [
            {
              text: "×× ×™ ×™×•×“×¢ ×©×“× ×” ×•×¨×•×Ÿ ×—×‘×¨×™× ×˜×•×‘×™×, ××‘×œ ××•×œ×™ ×›×“××™ ×œ×‘×—×•×¨ ××™×©×”×• ×©×™×•×“×¢ ×’× ×œ×©×œ×•×˜ ×•×’× ×œ×”×¦×—×™×§ â€“ ×›×™ ×’× ×‘× ×™×”×•×œ ×¦×¨×™×š ×§×¦×ª ×¡×˜× ×“-××¤.",
              technique: "×¨×¦×™×•× ×œ×™×–×¦×™×” ××›×•×•× ×ª",
              xp: 15,
              suspicion: 5,
              responses: {
                yael: "×¨×¦×™×•× ×œ×™×•×ª ×¢× ×§×¨×™×¦×” â€“ ××™ ×™×“×¢ ×©× ×™×ª×Ÿ ×œ×©×œ×‘ ×›×™×©×•×¨×™× ×¢× ×‘×“×™×—×•×ª?",
                noam: "××•×œ×™ × ×‘×—×¨ ××ª ×–×” ×©×™×•×“×¢ ×œ×¡×¤×¨ ×‘×“×™×—×•×ª ×‘×–××Ÿ ×©×™×¢×•×¨ â€“ ×–×” ×™×•×¡×™×£ ×§×¦×ª ×ª×‘×œ×™×Ÿ.",
                amit: "×”××¤×ª×— ×”×•× ×œ×‘×—×•×¨ ××™×©×”×• ×©×’× ×™×•×“×¢ ×œ×©×œ×‘ ×”×•××•×¨ ×¢× ×× ×”×™×’×•×ª."
              },
              analysis: "×˜×›× ×™×§×ª '×”×¨×—×§×” ×¨×’×©×™×ª' â€“ ×œ×”×¤×¨×™×“ ×‘×™×Ÿ ×”×œ×‘ ×œ×‘×“×™×—×”, ×•×œ×”×‘×™× ××ª ×”×›×™×©×•×¨×™× ×”×××™×ª×™×™× ×¢× ×§×•×¨×˜×•×‘ ×¦×™× ×™."
            },
            {
              text: "×©××¢×ª×™ ×©×”××•×¨×” ×××© ××•×”×‘ ×¤×¨×•×™×§×˜×™× ×¢×œ ×˜×›× ×•×œ×•×’×™×” ×•×—×™× ×•×š â€“ ××•×œ×™ × ×‘×—×¨ × ×¦×™×’ ×©×”×•× ×’× geek, ×›×“×™ ×œ×§×‘×œ ×¦×™×•×Ÿ ×’×‘×•×” ×•×’× ×œ×§×¨×•× ×œ×• '××’×“ ×ª×™×›×•× ×™'.",
              technique: "×§×˜×¡×˜×¨×•×¤×™×–×¦×™×”",
              xp: 25,
              suspicion: 10,
              responses: {
                yael: "×˜×›× ×•×œ×•×’×™×” ×¢× ×”×•××•×¨? ×œ×¤×—×•×ª ×× × ×§×‘×œ ×¦×™×•×Ÿ, × ×•×›×œ ×œ×¡×¤×¨ ×¢×œ ×–×” ×›××’×“×”.",
                noam: "×× ×”×•× ×’× geek ×•×’× ××¦×—×™×§ â€“ ×–×” ×™×›×•×œ ×œ×©×‘×•×¨ ××ª ×”×©×’×¨×”.",
                amit: "×–×” ×›××• ×œ×§×¨×•× ×œ××•×¨×” '×¡×˜× ×“-××¤' â€“ ×× ×”×•× ××•×”×‘ ×˜×›× ×•×œ×•×’×™×”, ×’× ×× ×—× ×• × ×”×™×” ××™×•×—×“×™×."
              },
              analysis: "×”×¦×’×ª ×”×‘×—×™×¨×” ×›××©×”×• ×“×¨××˜×™ â€“ ×’× ×× ×‘×¡×•×¤×• ×©×œ ×“×‘×¨ ×–×” ×¨×§ ×¢×•×“ ×¤×¨×•×™×§×˜."
            },
            {
              text: "×‘×•××• × ×‘×—×¨ ××ª ×”× ×¦×™×’ ×¢× ×™×›×•×œ×ª ×©×›× ×•×¢ ×©××©×“×¨ ×”×•××•×¨ â€“ ×›×–×” ×©×™×•×“×¢ ×œ×”×¤×•×š ×›×œ × ××•× ×œ×‘×“×™×—×” ×©×—×•×¨×”.",
              technique: "×™×¦×™×¨×ª ×™×™×—×•×“×™×•×ª",
              xp: 20,
              suspicion: 10,
              responses: {
                yael: "× ×¦×™×’ ×§×•××™ ×©×™×•×“×¢ ×œ×“×‘×¨ â€“ ×–×” ×™×›×•×œ ×œ×”×¤×•×š ××ª ×”×‘×—×™×¨×•×ª ×œ××•×¤×¢ ×××™×ª×™.",
                noam: "×× ×”×•× ××¦×œ×™×— ×œ×©×œ×‘ ×©×›× ×•×¢ ×¢× ×¡×˜× ×“-××¤, ×œ×¤×—×•×ª ×™×”×™×” ×œ× ×• ××©×”×• ××¢× ×™×™×Ÿ.",
                amit: "×–×” ×”×–××Ÿ ×œ×‘×—×•×¨ ××™×©×”×• ×©×”×•×¤×š ××ª ×”×¨×¦×™× ×•×ª ×œ×‘×“×™×—×”, ×›×™ ×‘×¢×•×œ× ×”×–×” ×”×›×œ ××¤×©×¨×™."
              },
              analysis: "×™×¦×™×¨×ª ×™×™×—×•×“×™×•×ª â€“ ×œ×‘×—×•×¨ ××ª ××™ ×©××‘×™× ××ª ×”×§×¡× ×”×§×•××™ ×’× ×›×©××“×•×‘×¨ ×‘××¦×™××•×ª ×¨×¦×™× ×™×ª."
            },
            {
              text: "×× ×œ× × ×ª×œ×‘×˜, ×‘×•××• × ×‘×—×¨ ××ª ×–×” ×©×”×›×™ ××¦×—×™×§ ××•×ª× ×• â€“ ×›×™ ×’× ×”×‘×—×™×¨×•×ª ×¦×¨×™×›×•×ª ×œ×”×™×•×ª ××•×¤×¢ ×§×•××™, ×’× ×× ×–×” ××•××¨ ×œ×”×—×œ×™×£ ×× ×”×™×’×•×ª ×‘×”×•××•×¨.",
              technique: "×”×•××•×¨ ×× ×¦×—",
              xp: 30,
              suspicion: 15,
              responses: {
                yael: "××•×œ×™ × ×‘×—×¨ ××ª ×–×” ×©××‘×™× ××ª ×”×‘×“×™×—×•×ª, ×’× ×× ×–×” ××•××¨ ×©×”×”×—×œ×˜×” ×ª×”×™×” ×¢×œ ×‘×¡×™×¡ ×§×•××™.",
                noam: "×× ×”×•× ××¦×—×™×§, ×œ×¤×—×•×ª × ×¡×‘×•×œ ×¢× ×—×™×•×š â€“ ×’× ×× ×–×” ××©× ×” ××ª ×›×œ×œ×™ ×”××©×—×§.",
                amit: "×‘×•××• × ×‘×—×¨ ××ª ×”× ×¦×™×’ ×©×’×•×¨× ×œ× ×• ×œ×¦×—×•×§ ×’× ×‘×–××Ÿ ×”×”×¦×‘×¢×” â€“ ×–×” ××” ×©×”×¢×•×œ× ×¦×¨×™×š."
              },
              analysis: "×˜×›× ×™×§×ª '×”×•××•×¨ ×× ×¦×—' â€“ ×œ×‘×—×•×¨ ××ª ×”×× ×¦×— ×¢× ×§×¨×™×¦×”, ×›×™ ×’× ×‘×¢×•×œ× ×¨×¦×™× ×™ ×¦×¨×™×š ×§×¦×ª ×¦×—×•×§."
            }
          ]
        }
      ]
    };

    // ×¢×“×›×•×Ÿ ×¡×˜×˜×•×¡ (XP, ×—×©×“, ×©×œ×‘)
    function updateStats() {
      document.getElementById('xp-display').textContent = gameState.xp;
      document.getElementById('suspicion-display').textContent = gameState.suspicion + "%";
      document.getElementById('level-display').textContent = (gameState.currentScenario + 1) + "/" + gameState.scenarios.length;
      if (gameState.suspicion >= 50) {
        document.getElementById('suspicion-warning').style.display = "block";
      }
    }

    // ×˜×¢×™× ×ª ×¡×¦× ×” ×œ×¤×™ ××™× ×“×§×¡
    function loadScenario(index) {
      const scenario = gameState.scenarios[index];
      gameState.currentScenario = index;
      updateStats();
      document.getElementById('scenario-title').textContent = scenario.title;
      
      // ×˜×¢×™× ×ª ×”×•×“×¢×•×ª ×”×ª×—×œ×ª×™×•×ª
      const chatContainer = document.getElementById('chat-container');
      chatContainer.innerHTML = "";
      scenario.initialMessages.forEach(msg => {
        const messageDiv = document.createElement("div");
        messageDiv.className = "chat-message";
        let avatarClass = msg.character === "×™×¢×œ" ? "avatar-yael" : (msg.character === "× ×•×¢×" ? "avatar-noam" : "avatar-amit");
        messageDiv.innerHTML = `
          <div class="avatar ${avatarClass}">${msg.character[0]}</div>
          <div class="message-content">
            <div class="character-name">${msg.character}:</div>
            <div>${msg.text}</div>
          </div>
        `;
        chatContainer.appendChild(messageDiv);
      });
      
      // ×˜×¢×™× ×ª ××¤×©×¨×•×™×•×ª (4 ×›×¤×ª×•×¨×™×)
      const optionsContainer = document.getElementById('options-container');
      optionsContainer.innerHTML = "";
      scenario.options.forEach((opt, idx) => {
        const btn = document.createElement("button");
        btn.className = "option-btn";
        btn.textContent = opt.text;
        btn.dataset.technique = opt.technique;
        btn.dataset.xp = opt.xp;
        btn.dataset.suspicion = opt.suspicion;
        btn.onclick = () => selectOption(idx);
        const span = document.createElement("span");
        span.className = "technique";
        span.textContent = opt.technique;
        btn.appendChild(span);
        optionsContainer.appendChild(btn);
      });
      
      // ×”×¡×ª×¨×ª ×”××©×•×‘
      document.getElementById('feedback-container').style.display = "none";
      document.getElementById('next-btn').style.display = "none";
    }

    // ×˜×™×¤×•×œ ×‘×‘×—×™×¨×ª ××¤×©×¨×•×ª
    function selectOption(optionIndex) {
      const options = document.querySelectorAll(".option-btn");
      options.forEach(btn => btn.disabled = true);
      const scenario = gameState.scenarios[gameState.currentScenario];
      const chosen = scenario.options[optionIndex];
      gameState.xp += chosen.xp;
      gameState.suspicion += chosen.suspicion;
      updateStats();
      let fbHTML = "<div class='feedback-title'>ğŸ“ ×ª×’×•×‘×•×ª ×”×§×‘×•×¦×”:</div><ul>";
      for (let person in chosen.responses) {
        fbHTML += `<li><strong>${person}:</strong> ${chosen.responses[person]}</li>`;
      }
      fbHTML += "</ul>";
      fbHTML += `<div class="analysis-container" style="display:block;">
                   <div class="analysis-title">ğŸ§  × ×™×ª×•×— ×¤×¡×™×›×•×œ×•×’×™ ×¡×•×“×™:</div>
                   <div id="analysis-content">${chosen.analysis}</div>
                 </div>`;
      document.getElementById("feedback-content").innerHTML = fbHTML;
      document.getElementById("feedback-container").style.display = "block";
      document.getElementById("next-btn").style.display = "inline-block";
    }

    // ××¢×‘×¨ ×œ×¡×¦× ×” ×”×‘××” ××• ×¡×™×•× ×”××©×—×§
    function nextScenario() {
      const nextIndex = gameState.currentScenario + 1;
      if (nextIndex < gameState.scenarios.length) {
        loadScenario(nextIndex);
      } else {
        document.getElementById('transitionSound').play();
        setTimeout(() => {
          window.location.href = "talk.html";
        }, 1500);
      }
    }

    // ×¤×•× ×§×¦×™×™×ª ××¦×‘ PANIC
    function panicMode() {
      document.getElementById('panicSound').play();
      alert("PANIC MODE ACTIVATED â€“ ××• ×¤×©×•×˜ ×ª×©×ª×” ×§×¤×” ×•×ª××©×™×š, ×”×—×™×™× ×§×¦×¨×™× ××“×™!");
    }

    // ×¤×•× ×§×¦×™×™×ª ×”×¨×¡ ×”××©×—×§ ×¢× ××¤×§×˜×™ ×¨×¢×™×“×•×ª
    function destroyGame() {
      const overlay = document.createElement('div');
      overlay.id = 'destroyOverlay';
      overlay.style.position = 'fixed';
      overlay.style.top = '0';
      overlay.style.left = '0';
      overlay.style.width = '100%';
      overlay.style.height = '100%';
      overlay.style.backgroundColor = 'black';
      overlay.style.opacity = '0.9';
      overlay.style.color = 'red';
      overlay.style.display = 'flex';
      overlay.style.justifyContent = 'center';
      overlay.style.alignItems = 'center';
      overlay.style.fontSize = '36px';
      overlay.style.zIndex = '9999';
      overlay.innerHTML = `
        <div style="text-align: center;">
          ğŸ’¥ <br>
          <span style="font-size: 48px; font-weight: bold;">BOOM!</span><br>
          <span style="font-size: 24px;">×”×¨×¡×ª ××ª ×”×¢×•×œ×! ×™×¤×” ×œ×š, ×¢×›×©×™×• ×ª×‘× ×” ××•×ª×• ××—×“×©...</span>
        </div>
      `;
      document.body.appendChild(overlay);
      
      document.getElementById('explosionSound').play();
      
      setTimeout(() => {
        document.body.removeChild(overlay);
        loadScenario(0); // ××ª×—×•×œ ×”××©×—×§ ××—×¨×™ ×”××¤×•×§×œ×™×¤×¡×”
      }, 3000);
    }

    // ××ª×—×•×œ ×”×¡×¦× ×” ×”×¨××©×•× ×”
    loadScenario(0);
  </script>
</body>
</html>
